<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>AffineConstructive.tactics.quote.vars</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library AffineConstructive.tactics.quote.vars</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="AffineConstructive.interfaces.abstract_algebra.html#"><span class="id" title="library">abstract_algebra</span></a> <a class="idref" href="AffineConstructive.interfaces.bundled_algebra.html#"><span class="id" title="library">interfaces.bundled_algebra</span></a> <a class="idref" href="AffineConstructive.interfaces.free.generators.html#"><span class="id" title="library">interfaces.free.generators</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="AffineConstructive.implementations.nat.html#"><span class="id" title="library">nat</span></a> <a class="idref" href="AffineConstructive.implementations.list.html#"><span class="id" title="library">list</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="AffineConstructive.tactics.quote.base.html#"><span class="id" title="library">quote.base</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="AffineConstructive.tactics.strip_coercions.html#"><span class="id" title="library">strip_coercions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="QuoteFindEnv" class="idref" href="#QuoteFindEnv"><span class="id" title="definition">QuoteFindEnv</span></a> := <a class="idref" href="AffineConstructive.interfaces.prelude.html#empty"><span class="id" title="inductive">empty</span></a>.<br/>
<span class="id" title="keyword">Existing Class</span> <span class="id" title="var">QuoteFindEnv</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="quote_find_atom" class="idref" href="#quote_find_atom"><span class="id" title="lemma">quote_find_atom</span></a> `(<a id="f:3" class="idref" href="#f:3"><span class="id" title="binder">f</span></a>:<a id="X:1" class="idref" href="#X:1"><span class="id" title="binder">X</span></a> <a class="idref" href="AffineConstructive.interfaces.set.html#b0e233f2f2b3c047123c6b17789ec7e0"><span class="id" title="notation">⇾</span></a> <a id="Y:2" class="idref" href="#Y:2"><span class="id" title="binder">Y</span></a>) <a id="y:4" class="idref" href="#y:4"><span class="id" title="binder">y</span></a> {<a id="e:5" class="idref" href="#e:5"><span class="id" title="binder">e</span></a>:<a class="idref" href="AffineConstructive.tactics.quote.vars.html#QuoteFindEnv"><span class="id" title="class">QuoteFindEnv</span></a>} : <a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#f:3"><span class="id" title="variable">f</span></a> (<a class="idref" href="AffineConstructive.interfaces.prelude.html#abort"><span class="id" title="definition">abort</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#e:5"><span class="id" title="variable">e</span></a>) <a class="idref" href="AffineConstructive.tactics.quote.vars.html#y:4"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">match</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Extern</span> 101 (<a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) ⇒ <span class="id" title="var">is_evar</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">refine</span> (<a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_find_atom"><span class="id" title="lemma">quote_find_atom</span></a> <span class="id" title="var">f</span> <span class="id" title="var">_</span>) : <span class="id" title="tactic">quote</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="quote_var_alt" class="idref" href="#quote_var_alt"><span class="id" title="lemma">quote_var_alt</span></a> `(<a id="f:9" class="idref" href="#f:9"><span class="id" title="binder">f</span></a>:<a id="X:7" class="idref" href="#X:7"><span class="id" title="binder">X</span></a> <a class="idref" href="AffineConstructive.interfaces.set.html#b0e233f2f2b3c047123c6b17789ec7e0"><span class="id" title="notation">⇾</span></a> <a id="Y:8" class="idref" href="#Y:8"><span class="id" title="binder">Y</span></a>) `{<a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Var_Morphism</span></a> <a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">(</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">X</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">:=</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">X</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">)</span></a> <a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">(</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Y</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">:=</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Y</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">)</span></a> <a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">(</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Γ</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">:=</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Γ</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">)</span></a> <a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">(</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">f</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">:=</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">f</span></a><a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">)</span></a>}<br/>
&nbsp;&nbsp;(<a id="n:13" class="idref" href="#n:13"><span class="id" title="binder">n</span></a>:<a class="idref" href="AffineConstructive.implementations.nat.nno.html#nat"><span class="id" title="inductive">nat</span></a>) {<a id="b:14" class="idref" href="#b:14"><span class="id" title="binder">b</span></a>:<a class="idref" href="AffineConstructive.implementations.list.base.html#ListInBounds"><span class="id" title="class">ListInBounds</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#8a5fb5e1be55058be9aa6b31d1a8bfab"><span class="id" title="variable">Γ</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:13"><span class="id" title="variable">n</span></a>} : <a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#f:9"><span class="id" title="variable">f</span></a> (<a class="idref" href="AffineConstructive.interfaces.free.generators.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:13"><span class="id" title="variable">n</span></a>) (<a class="idref" href="AffineConstructive.implementations.list.base.html#list_nth"><span class="id" title="definition">list_nth</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#8a5fb5e1be55058be9aa6b31d1a8bfab"><span class="id" title="variable">Γ</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:13"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <a class="idref" href="AffineConstructive.interfaces.free.generators.html#preserves_var"><span class="id" title="definition">preserves_var</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="quote_var" class="idref" href="#quote_var"><span class="id" title="definition">quote_var</span></a> `(<a id="f:18" class="idref" href="#f:18"><span class="id" title="binder">f</span></a>:<a class="idref" href="AffineConstructive.interfaces.free.generators.html#var_morphism"><span class="id" title="definition">var_morphism</span></a> <a id="X:15" class="idref" href="#X:15"><span class="id" title="binder">X</span></a> (<span class="id" title="var">Y</span>:=<a id="Y:16" class="idref" href="#Y:16"><span class="id" title="binder">Y</span></a>) <a id="de99c0e007bd311d76da1801ff347713" class="idref" href="#de99c0e007bd311d76da1801ff347713"><span class="id" title="binder">Γ</span></a>) (<a id="n:19" class="idref" href="#n:19"><span class="id" title="binder">n</span></a>:<a class="idref" href="AffineConstructive.implementations.nat.nno.html#nat"><span class="id" title="inductive">nat</span></a>) {<a id="b:20" class="idref" href="#b:20"><span class="id" title="binder">b</span></a>:<a class="idref" href="AffineConstructive.implementations.list.base.html#ListInBounds"><span class="id" title="class">ListInBounds</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#de99c0e007bd311d76da1801ff347713"><span class="id" title="variable">Γ</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:19"><span class="id" title="variable">n</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#f:18"><span class="id" title="variable">f</span></a> (<a class="idref" href="AffineConstructive.interfaces.free.generators.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:19"><span class="id" title="variable">n</span></a>) (<a class="idref" href="AffineConstructive.implementations.list.base.html#list_nth"><span class="id" title="definition">list_nth</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#de99c0e007bd311d76da1801ff347713"><span class="id" title="variable">Γ</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:19"><span class="id" title="variable">n</span></a>)<br/>
:= <a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_var_alt"><span class="id" title="lemma">quote_var_alt</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#f:18"><span class="id" title="variable">f</span></a> <a class="idref" href="AffineConstructive.tactics.quote.vars.html#n:19"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">test_eq</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> := <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">first</span> [ <span class="id" title="var">unify</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">exact</span> <a class="idref" href="AffineConstructive.interfaces.prelude.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="tactic">exact</span> <a class="idref" href="AffineConstructive.interfaces.prelude.html#false"><span class="id" title="constructor">false</span></a> ]) : <a class="idref" href="AffineConstructive.interfaces.prelude.html#bool"><span class="id" title="inductive">bool</span></a>).<br/>

<br/>
</div>

<div class="doc">
Inputs are terms (constrs)
     <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="AffineConstructive.interfaces.free.groups.html#free_additive_group.X"><span class="id" title="projection">X</span></a></span> <span class="inlinecode"></span>
     <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="AffineConstructive.implementations.list.base.html#list"><span class="id" title="inductive">list</span></a></span> <span class="inlinecode"><a class="idref" href="AffineConstructive.interfaces.free.groups.html#free_additive_group.X"><span class="id" title="projection">X</span></a></span> <span class="inlinecode"></span>
   returns <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode"></span> if x is already in <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode"></span>, and <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode"></span> otherwise 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">union_list</span> <span class="id" title="var">x</span> <span class="id" title="var">Γ</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">slow</span> <span class="id" title="var">Δ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="keyword">constr</span>:(<a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">Γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> ?<span class="id" title="var">y</span> ?<span class="id" title="var">Δ'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="var">test_eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">lazymatch</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.interfaces.prelude.html#true"><span class="id" title="constructor">true</span></a> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">Γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.interfaces.prelude.html#false"><span class="id" title="constructor">false</span></a> ⇒ <span class="id" title="var">slow</span> <span class="id" title="var">Δ'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">fast</span> <span class="id" title="var">Δ</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">slow</span> <span class="id" title="var">Γ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> ?<span class="id" title="var">y</span> ?<span class="id" title="var">Δ'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">Γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">fast</span> <span class="id" title="var">Δ'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">fast</span> <span class="id" title="var">Γ</span>.<br/>

<br/>
</div>

<div class="doc">
Inputs are terms (constrs)
     <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="AffineConstructive.implementations.list.base.html#list"><span class="id" title="inductive">list</span></a></span> <span class="inlinecode"><a class="idref" href="AffineConstructive.interfaces.free.groups.html#free_additive_group.X"><span class="id" title="projection">X</span></a></span> <span class="inlinecode"></span>
     <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="AffineConstructive.interfaces.free.groups.html#free_additive_group.X"><span class="id" title="projection">X</span></a></span> <span class="inlinecode"></span>
   returns <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"></span> such that <span class="inlinecode"></span> <span class="inlinecode"><a class="idref" href="AffineConstructive.implementations.list.base.html#list_nth"><span class="id" title="definition">list_nth</span></a></span> <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"></span> is <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"></span> 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">list_index</span> <span class="id" title="var">Γ</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">slow</span> <span class="id" title="var">Δ</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="tactic">fail</span> "term " <span class="id" title="var">x</span> " not in list " <span class="id" title="var">Γ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> ?<span class="id" title="var">y</span> ?<span class="id" title="var">Δ'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="var">test_eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">lazymatch</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.interfaces.prelude.html#true"><span class="id" title="constructor">true</span></a> ⇒ <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.interfaces.prelude.html#false"><span class="id" title="constructor">false</span></a> ⇒ <span class="id" title="var">slow</span> <span class="id" title="var">Δ'</span> (<a class="idref" href="AffineConstructive.implementations.nat.nno.html#nat_S"><span class="id" title="constructor">nat_S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">fast</span> <span class="id" title="var">Δ</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">slow</span> <span class="id" title="var">Γ</span> <span class="id" title="var">nat_0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> ?<span class="id" title="var">y</span> ?<span class="id" title="var">Δ'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">y</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> ⇒ <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">fast</span> <span class="id" title="var">Δ'</span> (<a class="idref" href="AffineConstructive.implementations.nat.nno.html#nat_S"><span class="id" title="constructor">nat_S</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">fast</span> <span class="id" title="var">Γ</span> <span class="id" title="var">nat_0</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">quote_add_env</span> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <span class="id" title="var">quote_tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">build_env</span> <span class="id" title="var">_</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e</span> := <span class="id" title="tactic">fresh</span> "e" <span class="id" title="tactic">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="var">quote_tac</span> <span class="id" title="var">f</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">aux</span> <span class="id" title="var">t</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span> <span class="id" title="var">C</span> [ <a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_find_atom"><span class="id" title="lemma">quote_find_atom</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">z</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">a</span> := <span class="id" title="keyword">constr</span>:(<a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_find_atom"><span class="id" title="lemma">quote_find_atom</span></a> <span class="id" title="var">f</span> <span class="id" title="var">z</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Q</span> := <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t'</span> := <span class="id" title="keyword">context</span> <span class="id" title="var">C</span> [ @<a class="idref" href="AffineConstructive.interfaces.prelude.html#abort"><span class="id" title="definition">abort</span></a> <span class="id" title="var">Q</span> <span class="id" title="var">e</span> ] <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ'</span> := <span class="id" title="var">aux</span> <span class="id" title="var">t'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">union_list</span> <span class="id" title="var">z</span> <span class="id" title="var">Γ'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Γ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ'</span> := <span class="id" title="var">aux</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Γ'</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">T</span> := <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">ltac</span>:(<span class="id" title="var">build_env</span> <span class="id" title="keyword">ltac</span>:(0)) : <a class="idref" href="AffineConstructive.interfaces.notation.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e:21" class="idref" href="#e:21"><span class="id" title="binder">e</span></a>:<a class="idref" href="AffineConstructive.tactics.quote.vars.html#QuoteFindEnv"><span class="id" title="class">QuoteFindEnv</span></a><a class="idref" href="AffineConstructive.interfaces.notation.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="AffineConstructive.interfaces.notation.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span><a class="idref" href="AffineConstructive.interfaces.notation.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">Γ'</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">Γ'</span>) <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">quote_build_env</span> <span class="id" title="var">f</span> <span class="id" title="var">quote_tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Y</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">constr</span>:(<a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> <span class="id" title="var">f</span>) <span class="id" title="keyword">with</span> @<a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> ?<span class="id" title="var">X</span> ?<span class="id" title="var">Y</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Y</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">quote_add_env</span> <span class="id" title="keyword">constr</span>:(@<a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">Y</span>) <span class="id" title="var">f</span> <span class="id" title="var">quote_tac</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">quote_unfold_list</span> <span class="id" title="var">Γ</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">with</span> <a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">Γ</span> | <a class="idref" href="AffineConstructive.implementations.list.base.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">Γ</span> | <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">quote_var</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span> := <span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;[ <span class="id" title="keyword">let</span> <span class="id" title="var">cf</span> := <span class="id" title="keyword">constr</span>:(<span class="id" title="var">f</span> : <a class="idref" href="AffineConstructive.interfaces.free.generators.html#var_morphism_t"><span class="id" title="record">var_morphism_t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">vf</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="var">cf</span> <span class="id" title="keyword">with</span> ?<span class="id" title="var">g</span> ⇒ <span class="id" title="var">g</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">vf</span> <span class="id" title="keyword">with</span> <a class="idref" href="AffineConstructive.interfaces.free.generators.html#var_morphism_t"><span class="id" title="record">var_morphism_t</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">Γ</span> ⇒ <span class="id" title="var">quote_unfold_list</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">list_index</span> <span class="id" title="var">Γ</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_var"><span class="id" title="definition">quote_var</span></a> <span class="id" title="var">vf</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="keyword">constr</span>:(<span class="id" title="var">_</span> : <a class="idref" href="AffineConstructive.interfaces.free.generators.html#Var_Morphism"><span class="id" title="class">Var_Morphism</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="var">H'</span> <span class="id" title="keyword">with</span> ?<span class="id" title="var">H</span> ⇒ <span class="id" title="var">H</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> <a class="idref" href="AffineConstructive.interfaces.free.generators.html#Var_Morphism"><span class="id" title="class">Var_Morphism</span></a> ?<span class="id" title="var">Γ</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">quote_unfold_list</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">list_index</span> <span class="id" title="var">Γ</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="AffineConstructive.tactics.quote.vars.html#quote_var_alt"><span class="id" title="lemma">quote_var_alt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">H</span>:=<span class="id" title="var">H</span>) <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;].<br/>

<br/>
<span class="id" title="keyword">Global Hint Extern</span> 90 (<a class="idref" href="AffineConstructive.tactics.quote.base.html#quote"><span class="id" title="definition">quote</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span>) ⇒ <span class="id" title="var">is_evar</span> <span class="id" title="var">x</span>; <span class="id" title="var">quote_hint_strip</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> ⇒ <span class="id" title="var">quote_var</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>) : <span class="id" title="tactic">quote</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">quote_equation</span> <span class="id" title="var">ev</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <a class="idref" href="AffineConstructive.interfaces.aprop.html#apos"><span class="id" title="class">apos</span></a> ?<span class="id" title="var">E</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">quote_tac</span> <span class="id" title="var">f</span> := <span class="id" title="var">quote_wrap</span> <span class="id" title="var">f</span> <span class="id" title="var">uconstr</span>:(<a class="idref" href="AffineConstructive.interfaces.aprop.html#apos"><span class="id" title="class">apos</span></a> (<span class="id" title="var">_</span> <a class="idref" href="AffineConstructive.interfaces.aprop.html#5802bd8d09865aab7407d144e74b4ff1"><span class="id" title="notation">⊸</span></a> <span class="id" title="var">E</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ev₀</span> := <span class="id" title="var">ev</span> <span class="id" title="var">uconstr</span>:(<a class="idref" href="AffineConstructive.implementations.list.base.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ'</span> := <span class="id" title="var">quote_build_env</span> <span class="id" title="var">ev₀</span> <span class="id" title="var">quote_tac</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Γ</span> := <span class="id" title="tactic">fresh</span> "Γ" <span class="id" title="tactic">in</span> <span class="id" title="tactic">pose</span> (<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">evΓ</span> := <span class="id" title="var">ev</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">Γ</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="tactic">fresh</span> "ev" <span class="id" title="tactic">in</span> <span class="id" title="tactic">pose</span> (<span class="id" title="var">f</span> := <span class="id" title="var">evΓ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="var">quote_tac</span> <span class="id" title="var">f</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="AffineConstructive.interfaces.sprop.html#andl"><span class="id" title="projection">sprop.andl</span></a> <span class="id" title="var">H</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">find_structure_and_quote_equation</span> <span class="id" title="var">structure</span> <span class="id" title="var">make</span> <span class="id" title="var">ev</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Y</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <a class="idref" href="AffineConstructive.interfaces.aprop.html#apos"><span class="id" title="class">apos</span></a> (<span class="id" title="var">_</span> <a class="idref" href="AffineConstructive.interfaces.relation_notation.html#6b9a5c160360edefd992463ff8bf70e9"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> <a class="idref" href="AffineConstructive.interfaces.relation_notation.html#6b9a5c160360edefd992463ff8bf70e9"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="AffineConstructive.interfaces.set.html#set_T"><span class="id" title="projection">set_T</span></a> ?<span class="id" title="var">Y</span>) ⇒ <span class="id" title="var">strip_coercions</span> <span class="id" title="var">Y</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">X</span> := <span class="id" title="tactic">fresh</span> "X" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">exact</span> <span class="id" title="var">Y</span> | <span class="id" title="var">make</span> <span class="id" title="var">Y</span> ] ) : <span class="id" title="var">structure</span>) <span class="id" title="keyword">with</span> ?<span class="id" title="var">s</span> ⇒ <span class="id" title="tactic">pose</span> (<span class="id" title="var">X</span> := <span class="id" title="var">s</span>) <span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">quote_equation</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">ev</span> <span class="id" title="var">X</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>